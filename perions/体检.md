

```dataviewjs
let folder = dv.pages(`"perions"`)
let term = '';
dv.header(3, `${term}`)
let rg1 = /!\[(?!\[).*?\]\((?!<?http:|<?https:|<?file:)(.+?\.[a-zA-Z]{3,4})\>?\)|!\[\[(.+?\.[a-zA-Z]{3,4})\|?.*?\]\]/g


function extract(str) {
  let r = [];
  str.replace(rg1, (m, p1, p2) => {
    r.push(p1 || p2)
  });
  return r[0]
}

folder.map(async p => {
  console.log("path",p.file.path)
  let fc = app.metadataCache.getFileCache(app.vault.getAbstractFileByPath(p.file.path)).headings
  if (!fc) return;

  // 获取二级且等于 term 的索引
  let i = fc.findIndex(p => p.level == 3 && p.heading == term) 
  if (i == -1 ) {
    console.log("not find target header")
    return 
  }
  let j = i + 1;

  while (fc[j]?.level > 3) {
    j++
  }  // fc[j]存在且级数大于二跳到下个索引


  let A = (await app.vault.readRaw(p.file.path)).split('\n')  // 分块
  console.log("A0",A)
  // A = fc[j] ? A.slice(fc[i].position.end.line + 1, fc[j].position.end.line) : A.slice(fc[i].position.end.line + 1)  // 截取
  if (fc[j]) {
    console.log("no end")
    A = A.slice(fc[i].position.end.line + 1, fc[j].position.end.line)
  } else {
    console.log("end")
    A = A.slice(fc[i].position.end.line + 1)
  }
  console.log("A1",A)

  let mats = []; 
  A.map(a => { 
    for (m of a.matchAll(rg1)) {
      mats.push(m[0])
    } 
  })
  console.log("mats0",mats)
  let B = p.file.outlinks.filter(p => p.embed && !/\.md$/.test(p.path))
  // console.log("B0",B)

  B.map(b => {
    let path = b.path.split('/'); 
    let dis = /.*?(?:\|)?(.*?)(?:\|)?(\d+)$/.exec(b.display);
    let src = encodeURI(`file:${app.vault.adapter.basePath}/${b.path}`);

    // console.log("b info", path, dis, src)
    mats.map(m => {
      // console.log("m0",m) 
      let e = extract(m);
      // console.log("e0",e) 

      let boo = e.replace(/\.\//).includes('/') ? e.endsWith(path.slice(-2).join('/')) : e.endsWith(path.slice(-1))
      A.map(a => {
        // console.log("call A.map", a)
        a.replace(m, () => {
          if (boo) { 
            return dis ? `<img width='${dis[2]}' src='${src}'>` : `<img src='${src}'>` 
          } else { 
            return m 
          }
        })
      })  
    })
  }); 

  dv.paragraph(`##### ${p.file.link}\n${A.join('\n')}`)  // 合块、输出
})

```

# 常规
- [x] 血压? 没必要
- [ ] 

A, g, j, y, j, 

# 内科
- [ ] 胸部 ct (肺癌)
- [ ] 胸部高分辨 ct (1/2 年)
- [ ] 胸部 x 光 (不太行, 但是便宜)
- [ ] 64 排低剂量螺旋 ct , 16 排 ct
- [ ] 心电图
- [ ] 心血管检查 (动脉硬化(全身), 心脏彩超 (好), 血管 ct)
- [ ]  血流变 ?  ?  
- [ ] 肠镜 (3,5 /年)
- [ ] 胃镜 (3,5/年)
- [ ] 肿瘤标志物 afp(甲胎蛋白, 肝癌相关), psa (前列腺相关)  (一般是 35 以上), (cea)
- [ ] 甲状腺超声 ? 功能? 
- [x] 腹部超声 (肝胆胰脾肾)
- [ ] 泌尿超声? (前列腺超声?)
- [ ] 胃肠超声 (初步? )
- [ ] 肝胆 B 超? 
- [ ] 胃功能 (c 14 检测? ) 
- [ ] 免疫力相关? 
- [ ] 神经相关? 
- [ ] 维生素相关? 
- [ ] 肾功能? 
- [ ] 呼吸 (支气管, 咽喉)
- [ ] 全套肝功
- [ ] 全套肾功
- [ ] 血脂血糖 
- [ ] 生化全套
- [ ] 眼底检查
- [ ] 颈动脉彩超,  ([高血压](高血压.md)防治, 动脉是否病变)
- [ ] 血管内皮功能检查 (预防心血管功能疾病)
- [ ] 蛋白尿 ([高血压](高血压.md), 糖尿病)


# 皮肤

- [ ] 荨麻疹
- [ ] 湿疹

# 抽血 

- [x]  肝功能 11 项 (10)
- [x] 肾功能 5 项 (3)
- [x] 血脂 8 项  (4)  (脂蛋白 a)
- [x] 血糖
- [x] 尿酸? 
- [ ] 血常规
- [ ] 传染病 4 项
- [ ] 乙肝 5 项
- [ ] 全血细胞计数
- [ ] 癌胚抗原测定 (cea? )

# 其他

- [ ] 尿常规
- [ ] 粪常规
- [ ] C 13 呼气实验 (幽门螺杆菌)
- [ ] 电解质? 


大便, 便秘腹泻, 变细, 偶尔有血